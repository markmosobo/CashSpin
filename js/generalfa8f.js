var modals=["#loginModal","#registerModal","#regVerifyModal","#withdrawalModal","#depositModal","#forgotPasswordModal","#newPasswordModal"];function depositApp(){return{amount:0,processing:!1,_serverMessage:"",closeModal:function(){this._serverMessage="",this.amount=0,jQuery("#depositModal").modal("hide")},showMessage:function(e,o){this._serverMessage=e;var i=this;setTimeout(function(){i._serverMessage=""},o||6e3)},submit:async function(){this.processing=!0;try{var e=await axios.post("/initialise-deposit",{amount:this.amount});this.processing=!1;var o=e.data;o&&1==o.result?(this.amount=0,this.showMessage(o.message)):this.showMessage(o.message)}catch(e){console.log(e),this.processing=!1,this.showMessage(e.message||"Failed to complete your deposit request.")}},init:function(){jQuery("#depositModal").on("shown.bs.modal",function(){jQuery(this).find("input").trigger("focus")})}}}function withdrawalApp(){return{amount:0,processing:!1,needsReload:!1,_serverMessage:"",showMessage:function(e,o){this._serverMessage=e;var i=this;setTimeout(function(){i._serverMessage=""},o||6e3)},closeModal:function(){this.needsReload||this.$wire.set("loaded",!1),this._serverMessage="",this.amount=0,jQuery("#withdrawalModal").modal("hide")},submitWithdrawal:async function(){this.processing=!0;try{var e=await axios.post("/initialise-withdrawal",{amount:this.amount});this.processing=!1;var o=e.data;o&&1==o.result?(this.amount=0,this.showMessage(o.message),this.needsReload=!0):this.showMessage(o.message)}catch(e){console.log(e),this.processing=!1,this.showMessage(e.message||"Failed to complete your deposit request.")}},init:function(){var e=this;jQuery("#withdrawalModal").on("hidden.bs.modal",function(){e.needsReload&&window.location.reload()}),jQuery("#withdrawalModal").on("show.bs.modal",function(){e.$wire.set("loaded",!0)}),jQuery("#withdrawalModal").on("shown.bs.modal",function(){jQuery(this).find("input").trigger("focus")})}}}function announcerApp(e){return{needsAnnouncing:e,waitingForReload:!1,async closeModal(){this.waitingForReload=!0,await this.$wire.storeAcknowledgement(),window.location.reload()},showModal(){jQuery("#levelUpModal").modal("show")},init(){this.needsAnnouncing&&this.showModal();var e=this;this.$watch("needsAnnouncing",function(){e.needsAnnouncing&&0==window._wheelCurrentlySpinning?e.showModal():!1===e.waitingForReload&&jQuery("#levelUpModal").modal("hide")})}}}function promoApp(){return{canShow:!0,loading:!1,closeModal:function(){var e=this;e.loading=!0,axios.post("/mark-h-promo-seen").then(function(o){e.canShow=!1,e.loading=!1,jQuery("#homepagePromotionModal").modal("hide")}).catch(function(e){console.log(e),alert("Request failed!")})},init:function(){this.canShow&&jQuery("#homepagePromotionModal").modal("show")}}}$(function(){$(".open-modal").on("click",function(e){e.preventDefault();var o=$(this).data("target");if(document.querySelectorAll(modals).forEach(function(e){$(e).modal("hide"),$(e).find("div.alert").hide(),$(e).find("span.text-red-300").hide()}),o){$(o).modal("show");var i=o.substring(1,o.indexOf("Modal"));window.history.replaceState({},"",location.origin+"?md="+i),$(o).on("hide.bs.modal",function(){window.history.replaceState({},"",location.origin)}),$(o).on("shown.bs.modal",function(){jQuery(this).find("input").not('[type="hidden"]').first().trigger("focus")})}}),$(".logout-btn").on("click",function(e){e.preventDefault(),window._wheelCurrentlySpinning&&!0===window._wheelCurrentlySpinning?(e.preventDefault(),console.log("Link blocked while wheel is spinning...")):document.getElementById("logout-form").submit()})});
